<!DOCTYPE html>
<html>
<head>
    <title>Aufgabe 6.3</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>WebSockets mit JSON</h1>
    <textarea id="chat" rows="10" cols="40"></textarea>
    
    <script type="text/javascript">
        const chat = document.getElementById('chat');

        const connection = new WebSocket('ws://51.77.53.86:4444');
        connection.onmessage = function(event) {
            try {
                const obj = JSON.parse(event.data);
                if (obj.id == 'www2_2021') {
                    chat.value += '--------' + obj.user + '--------\n';
                    chat.value += obj.txt + '\n';
                    chat.scrollTop = chat.scrollHeight;
                }
            } catch (err) {
                console.log("Kein JSON:", event.data);
            }
        };

        document.onkeydown = function(e) {
            // Pfeiltaste left: 37, up: 38, right: 39, down: 40
            if (e.which < 37 || e.which > 40) {
                return;
            }

            const msg = JSON.stringify({
                id: 'www2_2021',
                txt: e.which,
                user: 'Ṯ̴̡̡̢̧̻̝̺̤̣̳͖̥̤͍̖̻̮̟͙̠͓̄̿̇͆̔́̉͊̃͊͌̂̾͗̽͛̍̚͝͠͝ͅh̶̢̢̧̢̨̡̧̢̨̡̧̡̧̡̡̢̡̛̛̦̮̩̼̹͖̠̦̲͕͉̫̝̙̻͓̦̪͕̱͈̦̼̼̬͖̥̟̞̝͈̠̩̜̦̫̗̰͉̼̟̻͙͉̭̻̫̥̠̺̩̱̯͕͉̥̝͈̟̮̖̱͖͍̱͎̰̫̩͖͈̙̬̹̰̺͉̗͍͕̫̖̙̰̺̩͎̰̹̤͓͖͖̖̼͓̫̠̦̠͍͈̘̥͔͔͙̤̲̭̬͍͉̮̠͈̟̜͍͎̭̣̼̳̬̙̼̯̳̠̤͓̺̩̝̤̫͍͇̞̝̣̱̫̫͙͙̱̻͚̞̟̫̙͓̳̗̳̭͔̰̭͖̰̰̲̙̳͍͇̩̞̥̮̜̱̦̦͙͕̤͖̙̬͈̼̪̭͈̜̣͖̦̜̙̟̦̖̖̳̙͖̗̹̳̣̥̗̯͈̜̀̑̋̀̈́͐͒͗̋̍͂̊̉́̿̉̂̉̔̾̈́͑͒͑͆̄̚͜͜͜͜͜͜͜͜͜͜͜͜͝͝͠͝͝͝͝ͅͅͅȩ̸̢̛̛̛̛̛̼̻͖͕̮̝̝̹̲̟̥͓̹̫̠̠̤͚̣̳̥̳̰̝̠̙̱̟̟͎̬̩̼͍̙̫͓̟̣̼̫̮̞̬̝̤̹̜͓͔͈̰͎̞͙͑̊̑̊̎͗̽͗͋͌̽͆̔͒̐̓̋̎̐͂͛̈́͛̒̂̐̈́̉͌̅̇͋̊̓̍̏̈́͗̀̈͋͒̊̏̎͛̈͒̑́͑̍̋͒͑̓̊̒̔̍̒̃̑̂̍͊̿͆̾̋͊͊̍͒̊̇̀̔͐͗̑̉̎͌̈́͗̈́́́̌̑̈́̂̈́̑͒͑̽̉͊̍̿̊͆͒̂̈́̏͊̽͑̀͂̅̒͌̾͆̄̍̀̉͛̈́̾̏̎͊̋͌́͑̆͛̀͐͐͒͆͊̔̍͒̋̀̎͌̂̀̄̊̂̀̅͋̒̎̏̔̈́̀̓́̽̑̀̈́̀̆̍́̇̿̅͌͆̄͋͋̉̀̀̓̋̎̆͆͑̈́̅͒̀̊̆̾͒̃̆̆̑̍̒͐̀̈́͑̎͑̈́̌̈̓͑͑̈́̽̔̍͒̔̈́̀̇̈́̚̚̕̚͘̚̕͘͘̚̕͘͘͘̕͘͘̕͘͘̕͘͜͠͝͠͝͠͠͝͝͠͝͠͝͠͠͝͝͝͠͝͝͝͝͝ͅͅ ̴̨̨̢̨̧̧̡̨̢̡̡̡̛̝̭̪̗̻̰͕͕̙͈̠̟̬̥̺̖̟̗̬̲̳̫̻̠̜̠̳͔̠̬̣͖͇͉͍̱͇̞͚̲̠̺͈̺̹͇̣̼̱̳̺̲̪̪͖̝̬̬͓͓̠̹̞̺͓̹͚̦̪̮͚̝̝̪̖̬̣̮͍̗͈̟̯̞͍͍̣͉̺͉̗̥̘̠̠̺̝̳͉̖̘̼͍̲̣̞̫͚͉͙̯̖̮̫̙͖̲̼͎̼͖͉̹̲͎̠̫̤̲̬͖͙̬̬̥̼̲̖̄̋͛̈̓̋͋͌̐̌̿́̿̇̽͒̉̄̑̈́̏̌̑̋́͗̎̊̊̐̏̓̈́̄͐̓̈́̇͐͆͊̕͘͜͜͜͜͜͜͜͝͝͠ͅͅͅḐ̴̨̧̨̡̛̛̛̛͚̞̗̻͔̝͓̟̮̬͙͙̩͍̖̜͇͖̮̮͙̺̼̖͓̬̤̪̞̖̭̞̰̱̭͈̲͖͖̹̜̰̞͑̓̓̂͂̌̀͆́̂͋͛̅̃̎͂͛̀́̋̓́̊̈̋̾̊̌̽̑̈̃̎́͋̎͌̄̔͒̍̋̃̎̊͊̎͆̊̾͒̎͒̂̇͒̑̈̀̂̍́̽̍̆̄̈̈́̈́̃̃̓̌̂͆͒̉̐͐̓̅̎͛̈́̓̾̈̑̊̇͛̆̈̋̋͑̂̀̂̌̃̾̔̑̈͐̉͊̒̏̅̋͐̀̔̔͊́̅̈́͛̉̽́͐̒͋̑͂͑̽͛̽̔̈́̍͊̉̿̍̄̒̓͛̅͌̒͌́̈̽̃̊̓̿͒͑̇̀̈́͒̄̔͂̈́̔̕͘̚͘̚̕͘̕̕͘͜͝͠͝͝͠͠͝͝͝͝͝é̸̢̧̢̢̨̨̨̨̢̡̧̛̛̛͍̜̙̥̟̰͇͔̘̫̯̤͙̼̱̹̫̮̻͈͚͎̺̞̙̼̪̳͇͙͇͎̹͍̲͎͉͉̬̻̲̮͍͙͔̱̣̪̖̺̻͙̥͍̜̦̣̦̩̫͖͙̹̣̩͔̺̫̳͇̯̪̜̝̞͇͇̥͇͉͕̘̙͕͖̱̳̠̞͇͍̞͈͕͍͖̦̬̻̹̥̬̘͙̮̪̝͎̲͖͍̼͕̖͍̮̝͇̮̬̫̰̖̜̠͖̱͈̺͓̯̺̪̩̗̮̻͉̬̬͔͖͙͕̩̗͚̈́͑̈̋̎̇̉̓̒̊̍́̿̈́̅͒͌̓͊͒͐̃̎͊̎̅̀͆͗̎̉̒̏͐̂̄̓͑̃̽̄̇̒͂̊̉̃͗̇̀̎̆̋͑̅̉̇̆̍̈́̅͆̃͆̓̑̇̑́̽͌́͛̏̍̄́̾̓͒̄̑͒͆̂̆̐͌̆̎͛̈͗͋̀̊̋̈̊̃̈́̒͆͗̎̊͑̂̂̿̐̎̓̇͋͆̂̏̃͂̽͛̿́̔͛͐̋͆̋̇̍͑͑͌̍̑̊̒̅̈̇̉̊̽̀̌̒͛̔͛͗̍̍̂͒̂̆͘̕͘͘̚̚̕̕͘̚̚͜͜͜͠͠͝͠͝͠͝͝͠ͅͅͅͅṿ̷̨̨̢̨̢̢̡̨̧̧̢̧̡̡̡̢̢̨̧̡̢̢̧̧̢̢̛̛̛̛̰̦̬͚̳̣͍̞̪͕̺̯͖̰̠̬̫͎͇̱͍̘̯̤̹̪͈̤̤̣̼͖̤̪̹̰̰͉̻̠̦̖͍͙̳̦͈̠̮̹̦͕̺̬̩̖̥͈̞͈̻̠̙͇͕̠̰̫̬̙̗̟͈̘͉̠̤̼̣̫͓̤̹͓̳̰̗͕̫͇̼̪̱̞̖͈̟͓̯͕̼͉̲̭̩̘̯̹̝͙̱̰̜̘̲̣͉̭̜̼̥͔̭̥̱̬͎͚̠͙̟͔̙͎̟̤̭͎̫͚̪̳̗͉̝͕̮̞̻̻̰̩̗̮̯̗̯̫͙͇͚̱̼̗̟̳̲͉̲͇̲̥̩̪̼͖̙̯̝̫͙̼̠̤̫̠̗̳̝͍͓̼̺̬̭̳̳̹̲̝̹̺̝̹͔̩̲̟̥̳̗̱̱̠̞̠̞̮̥̩̞̦̘̣͍̯̠̫̮̱̻͚̮͙̣̠̖̻̯̱̘̝͉̟̙̥͔̤̮̦̬̝͔̰͕̑̔̈́̔̅̈́̔͒̋̃̈́̑̽̈̂͗̊̅̊̊͛̅̿̔̈́̉̀͌͌̃̔̅͐̌̂̓̍̀͂̌͌́̎̀̈́̀̌͌͐̏̆̾͋̀͆̆̋̄̈͗̉̓͒͑́̓͒͒̑͛̒̔̿̅̾̒̈́͆́̑̌̃̄̈̎̀̐̂͂̾̀͆̍̓́̄̉̾́̑͌̈́̋́̔́͌͆͋̈̀̔̆́̊̓̒̀̅̃̀̑̃͊̓͆̈́̈́͊̊̋͗̆͒͂̽̐͗̀̂̈̇́̿̅͊̏̑̋̓̅̅̇͒͊͂̔̄̓͐͑̈̇̽̒̍́̋̽̐̊̊̆́͗̓͒̾͌̈́̈́͑̔̾͒̾̊͘̕͘̚͘̚͘̕̕̕̕̚̕͘̕̕͜͜͝͠͝͝͝͝͝͝͝͝͝͝ͅͅͅͅͅi̸̡̡̢̢̢̡̡̨̡̢̧̢̢̡̧̡̛̛̛̛̛̛̤͈̰̬̻̖̪̰̰͚͇͍̙̜̖̻̩͚̖̝̼̝̥̻̦̪͓̜̟̝̻̱̜̫̪̫̯̗̹̮̫̺͖͚̜̣̬̻̠͕͚̙͇̣͉̞̱͚̻̭̬̩̪̟̰͚̮̥̝̣̥̬͎͈̳̫̣̰̦͉̳̮̤͕̖͓͙̰̮̣̬̱̦̯͉̼̇̆͗́́̊̏͂́̈́̋̑́̔̇̋͊̀̉̇̀̄̀̉̂̀̀̆̍̀͗͗̒̒̈̓̏̏̇̀̓̄͋͋̃͐͒́̈́́̒̂̄̉͊̏̍̓̏̐̈͋͂̽̎́͛̐̈̃̊͌̽̋̃͋̇̈́̌̃̈́̐͂͆͑̃̈͊͑̀͒̀̐͂̌̈̀̿̔͋͂͌̒́͒̉̇̉̓̒̿͆̇̽̾̏̔̿̿̎̀̅̓͒̇̀̉̀͒̕͘͘͘̕͘͘̚͘̕̚̕͘͜͜͜͜͜͜͝͝͝͝͝͝͝͠͠͝͝͠͠͝ͅl̸̡̡̧̢̛̛̛̛̛̛̛̛̛͕͍̦̦̘͚̗̘̜̲̖̰̺̥̹̗̱̙̯̝̣͖͔͉̭̝͓͈͉̰͚̐̋̋̉͗̀̀͒̂̏̍̃̐͐̔̓͋̈́̈́͋̾̀̾̽́̇̎̇͗̑͛̑̆͗͑̊̃̊͛̇͐̅̓͋͌̈́̋̔̂͆̈͂͛͗̌́̑́̂̾̑́̃̇͊͒̂̾͂̃͑̔̓͌͋̈́͗͒̓̈́̄̅̐̿̌̇̅̎͌͌̈̇̓̉͋̈́̽̈̓̃̋̿͗͒͐̋̋́̈́̌̈́͛͐̀̅͋͒̾́́̍͛̊̂̅́̌͐̍̽͌̽͌̒̑̀̈́̽̈̋̽̀̍̾͊̅̊̿̾͋͑́́̀̅̃̈́̍̉̃̈́́͗͂̅̽̋͑̊͋̓͒͋̃̒̈́̉̾̉̀̽́̓̑̈͒̾̾̍͋̋͒̐̉̒͊̓̾͌̂͌̎͌̄́̊̊̍̂̒͒̇̂̇̀́̾̈́̂̇̅̊͐̀͒̔̒̔̇͂̕̚̕̕̚͘͘̕̕̚̚͘̚̕͝͝͝͝͝͝͠͝͝͠͝͝͝͠͝͝͠͠͝͝͝ͅ'
            });
            connection.send(msg);
        };
    </script>
</body>
</html>
